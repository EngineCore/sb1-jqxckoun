---
interface Props {
  placeholder?: string;
}

const { placeholder = "Filter transactions..." } = Astro.props;
---

<div class="mb-4">
  <input
    type="text"
    id="tableFilter"
    placeholder={placeholder}
    class="w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"
  />
</div>

<script>
  const filterInput = document.getElementById('tableFilter') as HTMLInputElement;
  const tableRows = document.querySelectorAll('#transactionsTable tbody tr');

  filterInput?.addEventListener('input', (e) => {
    const searchTerm = (e.target as HTMLInputElement).value.toLowerCase();

    tableRows.forEach((row) => {
      const text = row.textContent?.toLowerCase() || '';
      row.style.display = text.includes(searchTerm) ? '' : 'none';
    });
  });
</script>